if("undefined"==typeof XWiki)var XWiki={}; Object.extend(XWiki,{constants:{wikiSpaceSeparator:":",spacePageSeparator:".",pageAttachmentSeparator:"@",anchorSeparator:"#",docextraAnnotationsAnchor:"Annotations",docextraCommentsAnchor:"Comments",docextraAttachmentsAnchor:"Attachments",docextraHistoryAnchor:"History",docextraInformationAnchor:"Information"},resource:{getWikiFromResourceName:function(a){return a.include(XWiki.constants.wikiSpaceSeparator)?a.substring(0,a.indexOf(XWiki.constants.wikiSpaceSeparator)):null},getSpaceFromResourceName:function(a){var b= a;a.include(XWiki.constants.wikiSpaceSeparator)&&(a=a.substring(a.indexOf(XWiki.constants.wikiSpaceSeparator)+1,a.length));return a.include(XWiki.constants.spacePageSeparator)?a.include(XWiki.constants.pageAttachmentSeparator)&&a.indexOf(XWiki.constants.spacePageSeparator)>a.indexOf(XWiki.constants.pageAttachmentSeparator)?null:a.substring(0,a.indexOf(XWiki.constants.spacePageSeparator)):b.include(XWiki.constants.wikiSpaceSeparator)&&!b.include(XWiki.constants.pageAttachmentSeparator)&&!b.include(XWiki.constants.anchorSeparator)? a:null},getNameFromResourceName:function(a){var b=a;a.include(XWiki.constants.wikiSpaceSeparator)&&(a=a.substring(a.indexOf(XWiki.constants.wikiSpaceSeparator)+1,a.length));a.include(XWiki.constants.pageAttachmentSeparator)&&(a=a.substring(0,a.indexOf(XWiki.constants.pageAttachmentSeparator)));a.include(XWiki.constants.anchorSeparator)&&(a=a.substring(0,a.indexOf(XWiki.constants.anchorSeparator)));return a.include(XWiki.constants.spacePageSeparator)?a.substring(a.indexOf(XWiki.constants.spacePageSeparator)+ 1,a.length):b.include(XWiki.constants.wikiSpaceSeparator)?null:a},getAttachmentFromResourceName:function(a){return a.include(XWiki.constants.pageAttachmentSeparator)?a.substring(a.indexOf(XWiki.constants.pageAttachmentSeparator)+1,a.length):null},getAnchorFromResourceName:function(a){return a.include(XWiki.constants.anchorSeparator)?a.substring(a.indexOf(XWiki.constants.anchorSeparator)+1,a.length):null},get:function(a){var b=this.getWikiFromResourceName(a),c=this.getSpaceFromResourceName(a),d=this.getNameFromResourceName(a), e=this.getAttachmentFromResourceName(a),a=this.getAnchorFromResourceName(a);b||(b=eXo.wiki.UIWikiRichTextArea.wiki);c||(c=eXo.wiki.UIWikiRichTextArea.space);d||(d=eXo.wiki.UIWikiRichTextArea.page);e||(e="");a||(a="");var f=c+XWiki.constants.spacePageSeparator+d;return{wiki:b,space:c,prefixedSpace:b+XWiki.constants.wikiSpaceSeparator+c,fullName:f,prefixedFullName:b+XWiki.constants.wikiSpaceSeparator+f,name:d,attachment:e,anchor:a}},serialize:function(a){var b="";a.wiki&&(b=a.wiki);a.space&&(0<b.length&& (b+=XWiki.constants.wikiSpaceSeparator),b+=a.space);a.name&&(0<b.length&&(b+=XWiki.constants.spacePageSeparator),b+=a.name);a.attachment&&(0<b.length&&(b+=XWiki.constants.pageAttachmentSeparator),b+=a.attachment);a.anchor&&(0<b.length&&(b+=XWiki.constants.anchorSeparator),b+=a.anchor);return b}},getResource:function(a){return this.resource.get(a)},displayDocExtra:function(a,b,c){var d=function(a){var b=document.getElementById(a+"tab"),c=document.getElementById(a+"pane");null!=window.activeDocExtraTab&& (window.activeDocExtraTab.className="",window.activeDocExtraPane.className="hidden");window.activeDocExtraTab=b;window.activeDocExtraPane=c;window.activeDocExtraTab.className="active";window.activeDocExtraPane.className="";b.blur();document.fire("xwiki:docextra:activated",{id:a})};-1!=$(a+"pane").className.indexOf("empty")?(null!=window.activeDocExtraPane&&(window.activeDocExtraPane.className="invisible"),$("docextrapanes").className="loading",new Ajax.Updater(a+"pane",window.docgeturl+"?xpage=xpart&vm="+ b,{method:"post",evalScripts:!0,onComplete:function(){$("docextrapanes").className="";document.fire("xwiki:docextra:loaded",{id:a,element:$(a+"pane")});d(a);c&&($(a+"anchor").id=a,location.href="#"+a,$(a).id=a+"anchor")}})):(d(a),c&&($(a+"anchor").id=a,location.href="#"+a,$(a).id=a+"anchor"))},makeRenderingErrorsExpandable:function(a){"undefined"==typeof a&&(a=document.body);$(a).select(".xwikirenderingerror").each(function(a){""!==a.next().innerHTML&&a.next().hasClassName("xwikirenderingerrordescription")&& (a.style.cursor="pointer",a.title="$msg.get('platform.core.rendering.error.readTechnicalInformation')",Event.observe(a,"click",function(a){a.element().next().toggleClassName("hidden")}))})},fixLinksTargetAttribute:function(a){if("view"==XWiki.contextaction||"preview"==XWiki.contextaction){"undefined"==typeof a&&(a=document.body);for(var a=a.select("a[rel]"),b=0;b<a.length;b++){var c=a[b];if(c.getAttribute("href")&&c.getAttribute("rel"))for(var d=c.getAttribute("rel").split(" "),e=0;e<d.length;e++)if("_"== d[e].charAt(0)){c.target=d[e].substring(1);break}else if("external"==d[e]){c.target="_blank";break}}}},insertSectionEditLinks:function(){if("xwiki/1.0"!=XWiki.docsyntax&&"view"==XWiki.contextaction&&XWiki.hasEdit){var a=1,b=$("xwikicontent");if(b)for(var b=b.childNodes,c=RegExp("H[1-"+$xwiki.getSectionEditingDepth()+"]"),d=0;d<b.length;d++){var e=$(b[d]);if(c.test(e.nodeName)&&!1==e.className.include("wikigeneratedheader")){var f=document.createElement("SPAN"),g=document.createElement("A");g.href= window.docediturl+"?section="+a;g.style.textDecoration="none";g.innerHTML="$msg.get('edit')";f.className="edit_section";f.appendChild(g);e.insert({after:f});a++}}}},insertCreatePageFromTemplateModalBoxes:function(){if("xwiki/1.0"!=XWiki.docsyntax&&"view"==XWiki.contextaction&&XWiki.hasEdit){XWiki.widgets.CreatePagePopup=Class.create(XWiki.widgets.ModalPopup,{initialize:function($super,a){var b=new Element("div",{"class":"modal-popup"});b.insert(a.content);$super(b,{show:{method:this.showDialog,keys:[]}, close:{method:this.closeDialog,keys:["Esc"]}},{displayCloseButton:!0,verticalPosition:"center",backgroundColor:"#FFF"});this.showDialog();this.setClass("createpage-modal-popup")}});for(var a=document.body.select("span.wikicreatelink"),b=0;b<a.length;b++)a[b].down("a").observe("click",function(a){new Ajax.Request(a.findElement("a").href+"&xpage=createinline&ajax=1",{method:"get",onSuccess:function(a){var b=a.getHeader("redirect");b?window.location=b:new XWiki.widgets.CreatePagePopup({content:a.responseText})}, onFailure:function(){(new XWiki.widgets.Notification("$msg.get('core.create.ajax.error')","error",{inactive:!0})).show()}});a.stop()})}},watchlist:{actionsMap:{tmWatchDocument:"adddocument",tmUnwatchDocument:"removedocument",tmWatchSpace:"addspace",tmUnwatchSpace:"removespace",tmWatchWiki:"addwiki",tmUnwatchWiki:"removewiki"},flowMap:{tmWatchDocument:"tmUnwatchDocument",tmUnwatchDocument:"tmWatchDocument",tmWatchSpace:"tmUnwatchSpace",tmUnwatchSpace:"tmWatchSpace",tmWatchWiki:"tmUnwatchWiki",tmUnwatchWiki:"tmWatchWiki"}, executeAction:function(a){new Ajax.Request(window.docgeturl+"?xpage=watch&do="+this.actionsMap[a.id],{method:"get",onComplete:function(){"A"==a.nodeName?(a.up().toggleClassName("hidden"),$(XWiki.watchlist.flowMap[a.id]).up().toggleClassName("hidden")):(a.toggleClassName("hidden"),$(XWiki.watchlist.flowMap[a.id]).toggleClassName("hidden"))}})},initialize:function(){for(button in XWiki.watchlist.actionsMap)if(null!=$(button)){var a=$(button);"A"!=a.nodeName&&(a=$(button).down("A"));a.stopObserving("click"); a.observe("click",function(a){Event.stop(a);for(a=a.element();""==a.id;)a=a.up();XWiki.watchlist.executeAction(a)})}}},cookies:{create:function(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+864E5*c);c="; expires="+d.toGMTString()}else c="";document.cookie=a+"="+b+c+"; path=/"},read:function(a){for(var a=a+"=",b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null},erase:function(a){XWiki.cookies.create(a, "",-1)}},togglePanelVisibility:function(a){a=$(a);a.toggleClassName("collapsed")},registerPanelToggle:function(){$$(".panel .xwikipaneltitle").each(function(a){a.observe("click",this.togglePanelVisibility.bind(this,a.up(".panel")))}.bind(this))},initialize:function(){if("undefined"==typeof this.isInitialized||!1==this.isInitialized)this.isInitialized=!0,document.fire("xwiki:dom:loading"),this.makeRenderingErrorsExpandable(),this.fixLinksTargetAttribute(),this.insertSectionEditLinks(),this.insertCreatePageFromTemplateModalBoxes(), this.watchlist.initialize(),this.registerPanelToggle(),this.domIsLoaded=!0,document.fire("xwiki:dom:loaded")}});document.observe("dom:loaded",XWiki.initialize.bind(XWiki)); function showsubmenu(a){if("span"==a.lastChild.tagName.toLowerCase()){window.hidetimer&&(window.hideelement==a.lastChild?(clearTimeout(window.hidetimer),window.hidetimer=null,window.hideelement=null):doHide());var b=Element.positionedOffset(a);a.lastChild.style.left=b[0]-10+"px";a.lastChild.style.top=b[1]+a.offsetHeight+"px";a.lastChild.className=a.lastChild.className.replace("hidden","visible")}} function hidesubmenu(a){"span"==a.lastChild.tagName.toLowerCase()&&(window.hideelement=a.lastChild,window.hidetimer=setTimeout(doHide,100))}function doHide(){window.hideelement.className=window.hideelement.className.replace("visible","hidden");clearTimeout(window.hidetimer);window.hidetimer=null;window.hideelement=null}function toggleClass(a,b){eltHasClass(a,b)?rmClass(a,b):a.className+=" "+b}function addClass(a,b){eltHasClass(a,b)||(a.className+=" "+b)} function eltHasClass(a,b){return!a.className?!1:RegExp("\\b"+b+"\\b").test(a.className)}function rmClass(a,b){a.className=a.className.replace(RegExp("\\s*\\b"+b+"\\b"),"")}function openURL(a){(win=open(a,"win","titlebar=0,width=990,height=500,resizable,scrollbars"))&&win.focus()}function openHelp(){(win=open("http://platform.xwiki.org/xwiki/bin/view/Main/XWikiSyntax?xpage=print","XWikiSyntax","titlebar=0,width=750,height=480,resizable,scrollbars"))&&win.focus()} function updateName(a,b,c){var d=a.value,d=noaccent(d);!1!=c&&(d=d.replace(/class$/gi,""));null==b?a.value=d:b.value=d;return""==d?!1:!0} function noaccent(a){temp=a.replace(/[\u00c0\u00c1\u00c2\u00c3\u00c4\u00c5\u0100\u0102\u0104\u01cd\u01de\u01e0\u01fa\u0200\u0202\u0226]/g,"A");temp=temp.replace(/[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5\u0101\u0103\u0105\u01ce\u01df\u01e1\u01fb\u0201\u0203\u0227]/g,"a");temp=temp.replace(/[\u00c6\u01e2\u01fc]/g,"AE");temp=temp.replace(/[\u00e6\u01e3\u01fd]/g,"ae");temp=temp.replace(/[\u008c\u0152]/g,"OE");temp=temp.replace(/[\u009c\u0153]/g,"oe");temp=temp.replace(/[\u00c7\u0106\u0108\u010a\u010c]/g, "C");temp=temp.replace(/[\u00e7\u0107\u0109\u010b\u010d]/g,"c");temp=temp.replace(/[\u00d0\u010e\u0110]/g,"D");temp=temp.replace(/[\u00f0\u010f\u0111]/g,"d");temp=temp.replace(/[\u00c8\u00c9\u00ca\u00cb\u0112\u0114\u0116\u0118\u011a\u0204\u0206\u0228]/g,"E");temp=temp.replace(/[\u00e8\u00e9\u00ea\u00eb\u0113\u0115\u0117\u0119\u011b\u01dd\u0205\u0207\u0229]/g,"e");temp=temp.replace(/[\u011c\u011e\u0120\u0122\u01e4\u01e6\u01f4]/g,"G");temp=temp.replace(/[\u011d\u011f\u0121\u0123\u01e5\u01e7\u01f5]/g, "g");temp=temp.replace(/[\u0124\u0126\u021e]/g,"H");temp=temp.replace(/[\u0125\u0127\u021f]/g,"h");temp=temp.replace(/[\u00cc\u00cd\u00ce\u00cf\u0128\u012a\u012c\u012e\u0130\u01cf\u0208\u020a]/g,"I");temp=temp.replace(/[\u00ec\u00ed\u00ee\u00ef\u0129\u012b\u012d\u012f\u0131\u01d0\u0209\u020b]/g,"i");temp=temp.replace(/[\u0132]/g,"IJ");temp=temp.replace(/[\u0133]/g,"ij");temp=temp.replace(/[\u0134]/g,"J");temp=temp.replace(/[\u0135]/g,"j");temp=temp.replace(/[\u0136\u01e8]/g,"K");temp=temp.replace(/[\u0137\u0138\u01e9]/g, "k");temp=temp.replace(/[\u0139\u013b\u013d\u013f\u0141]/g,"L");temp=temp.replace(/[\u013a\u013c\u013e\u0140\u0142\u0234]/g,"l");temp=temp.replace(/[\u00d1\u0143\u0145\u0147\u014a\u01f8]/g,"N");temp=temp.replace(/[\u00f1\u0144\u0146\u0148\u0149\u014b\u01f9\u0235]/g,"n");temp=temp.replace(/[\u00d2\u00d3\u00d4\u00d5\u00d6\u00d8\u014c\u014e\u0150\u01d1\u01ea\u01ec\u01fe\u020c\u020e\u022a\u022c\u022e\u0230]/g,"O");temp=temp.replace(/[\u00f2\u00f3\u00f4\u00f5\u00f6\u00f8\u014d\u014f\u0151\u01d2\u01eb\u01ed\u01ff\u020d\u020f\u022b\u022d\u022f\u0231]/g, "o");temp=temp.replace(/[\u0156\u0158\u0210\u0212]/g,"R");temp=temp.replace(/[\u0157\u0159\u0211\u0213]/g,"r");temp=temp.replace(/[\u015a\u015c\u015e\u0160\u0218]/g,"S");temp=temp.replace(/[\u015b\u015d\u015f\u0161\u0219]/g,"s");temp=temp.replace(/[\u00de\u0162\u0164\u0166\u021a]/g,"T");temp=temp.replace(/[\u00fe\u0163\u0165\u0167\u021b\u0236]/g,"t");temp=temp.replace(/[\u00d9\u00da\u00db\u00dc\u0168\u016a\u016c\u016e\u0170\u0172\u01d3\u01d5\u01d7\u01d9\u01db\u0214\u0216]/g,"U");temp=temp.replace(/[\u00f9\u00fa\u00fb\u00fc\u0169\u016b\u016d\u016f\u0171\u0173\u01d4\u01d6\u01d8\u01da\u01dc\u0215\u0217]/g, "u");temp=temp.replace(/[\u0174]/g,"W");temp=temp.replace(/[\u0175]/g,"w");temp=temp.replace(/[\u00dd\u0176\u0178\u0232]/g,"Y");temp=temp.replace(/[\u00fd\u00ff\u0177\u0233]/g,"y");temp=temp.replace(/[\u0179\u017b\u017d]/g,"Z");temp=temp.replace(/[\u017a\u017c\u017e]/g,"z");temp=temp.replace(/[\u00df]/g,"SS");return temp=temp.replace(/[^a-zA-Z0-9_]/g,"")} function prepareName(a){var b=a.register_first_name.value,c=a.register_last_name.value,a=a.xwikiname;""!=b&&(b=b.substring(0,1).toUpperCase()+b.substring(1),b.replace(/ /g,""));""!=c&&(c=c.substring(0,1).toUpperCase()+c.substring(1),c.replace(/ /g,""));""==a.value&&(a.value=noaccent(b+c))} function checkAdvancedContent(a){result=!1;if(!document.forms.edit)return!0;data=document.forms.edit.content.value;myRE=RegExp("</?(html|body|img|a|i|b|embed|script|form|input|textarea|object|font|li|ul|ol|table|center|hr|br|p) ?([^>]*)>","ig");(results=data.match(myRE))&&0<results.length&&(result=!0);myRE2=RegExp("(#(set|include|if|end|for)|#(#) Advanced content|public class|/* Advanced content */)","ig");(results=data.match(myRE2))&&0<results.length&&(result=!0);return!0==result?confirm(a):!0} shortcut={all_shortcuts:{},add:function(a,b,c){var d={type:"keydown",propagate:!1,disable_in_input:!1,target:document,keycode:!1};if(c)for(var e in d)"undefined"==typeof c[e]&&(c[e]=d[e]);else c=d;d=c.target;"string"==typeof c.target&&(d=document.getElementById(c.target));a=a.toLowerCase();e=function(d){d=d||window.event;if(c.disable_in_input){var e;d.target?e=d.target:d.srcElement&&(e=d.srcElement);3==e.nodeType&&(e=e.parentNode);if("INPUT"==e.tagName||"TEXTAREA"==e.tagName||"SELECT"==e.tagName)return}e= 0;d.keyCode?e=d.keyCode:d.which&&(e=d.which);var j=String.fromCharCode(e).toLowerCase();188==e&&(j=",");190==e&&(j=".");var i=a.split("+"),h=0,m={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(","0":")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},v={esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,home:36,"delete":46, end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},n=!1,o=!1,p=!1,q=!1,r=!1,s=!1,t=!1,u=!1;d.ctrlKey&&(q=!0);d.shiftKey&&(o=!0);d.altKey&&(s=!0);d.metaKey&&(u=!0);for(var l=0;k=i[l],l<i.length;l++)"ctrl"==k||"control"==k?(h++,p=!0):"shift"==k?(h++,n=!0):"alt"==k?(h++,r=!0):"meta"==k?(h++,t=!0):1<k.length?v[k]==e&&h++:c.keycode?c.keycode==e&&h++:j==k?h++:m[j]&&d.shiftKey&& (j=m[j],j==k&&h++);if(h==i.length&&q==p&&o==n&&s==r&&u==t&&(b(d),!c.propagate))return d.cancelBubble=!0,d.returnValue=!1,document.all&&!window.opera&&window.XMLHttpRequest&&(d.keyCode=0),d.stopPropagation&&(d.stopPropagation(),d.preventDefault()),!1};this.all_shortcuts[a]={callback:e,target:d,event:c.type};d.addEventListener?d.addEventListener(c.type,e,!1):d.attachEvent?d.attachEvent("on"+c.type,e):d["on"+c.type]=e},remove:function(a){var a=a.toLowerCase(),b=this.all_shortcuts[a];delete this.all_shortcuts[a]; if(b){var a=b.event,c=b.target,b=b.callback;c.detachEvent?c.detachEvent("on"+a,b):c.removeEventListener?c.removeEventListener(a,b,!1):c["on"+a]=!1}}}; function BrowserDetect(){var a=navigator.userAgent.toLowerCase();this.isGecko=-1!=a.indexOf("gecko")&&-1==a.indexOf("safari");this.isAppleWebKit=-1!=a.indexOf("applewebkit");this.isKonqueror=-1!=a.indexOf("konqueror");this.isSafari=-1!=a.indexOf("safari");this.isOmniweb=-1!=a.indexOf("omniweb");this.isOpera=-1!=a.indexOf("opera");this.isIcab=-1!=a.indexOf("icab");this.isAol=-1!=a.indexOf("aol");this.isIE=-1!=a.indexOf("msie")&&!this.isOpera&&-1==a.indexOf("webtv");this.isMozilla=this.isGecko&&a.indexOf("gecko/")+ 14==a.length;this.isFirefox=-1!=a.indexOf("firefox/")||-1!=a.indexOf("firebird/");this.isNS=this.isGecko?-1!=a.indexOf("netscape"):-1!=a.indexOf("mozilla")&&!this.isOpera&&!this.isSafari&&-1==a.indexOf("spoofer")&&-1==a.indexOf("compatible")&&-1==a.indexOf("webtv")&&-1==a.indexOf("hotjava");this.isIECompatible=-1!=a.indexOf("msie")&&!this.isIE;this.isNSCompatible=-1!=a.indexOf("mozilla")&&!this.isNS&&!this.isMozilla;this.geckoVersion=this.isGecko?a.substring(a.lastIndexOf("gecko/")+6,a.lastIndexOf("gecko/")+ 14):-1;this.equivalentMozilla=this.isGecko?parseFloat(a.substring(a.indexOf("rv:")+3)):-1;this.appleWebKitVersion=this.isAppleWebKit?parseFloat(a.substring(a.indexOf("applewebkit/")+12)):-1;this.versionMinor=parseFloat(navigator.appVersion);this.isGecko&&!this.isMozilla?this.versionMinor=parseFloat(a.substring(a.indexOf("/",a.indexOf("gecko/")+6)+1)):this.isMozilla?this.versionMinor=parseFloat(a.substring(a.indexOf("rv:")+3)):this.isIE&&4<=this.versionMinor?this.versionMinor=parseFloat(a.substring(a.indexOf("msie ")+ 5)):this.isKonqueror?this.versionMinor=parseFloat(a.substring(a.indexOf("konqueror/")+10)):this.isSafari?this.versionMinor=parseFloat(a.substring(a.lastIndexOf("safari/")+7)):this.isOmniweb?this.versionMinor=parseFloat(a.substring(a.lastIndexOf("omniweb/")+8)):this.isOpera?this.versionMinor=parseFloat(a.substring(a.indexOf("opera")+6)):this.isIcab&&(this.versionMinor=parseFloat(a.substring(a.indexOf("icab")+5)));this.versionMajor=parseInt(this.versionMinor);this.isDOM1=document.getElementById;this.isDOM2Event= document.addEventListener&&document.removeEventListener;this.mode=document.compatMode?document.compatMode:"BackCompat";this.isWin32=(this.isWin=-1!=a.indexOf("win"))&&(-1!=a.indexOf("95")||-1!=a.indexOf("98")||-1!=a.indexOf("nt")||-1!=a.indexOf("win32")||-1!=a.indexOf("32bit")||-1!=a.indexOf("xp"));this.isMac=-1!=a.indexOf("mac");this.isUnix=-1!=a.indexOf("unix")||-1!=a.indexOf("sunos")||-1!=a.indexOf("bsd")||-1!=a.indexOf("x11");this.isLinux=-1!=a.indexOf("linux");this.isNS40x=(this.isNS4x=this.isNS&& 4==this.versionMajor)&&4.5>this.versionMinor;this.isNS47x=this.isNS4x&&4.7<=this.versionMinor;this.isNS4up=this.isNS&&4<=this.versionMinor;this.isNS6x=this.isNS&&6==this.versionMajor;this.isNS6up=this.isNS&&6<=this.versionMajor;this.isNS7x=this.isNS&&7==this.versionMajor;this.isNS7up=this.isNS&&7<=this.versionMajor;this.isIE4x=this.isIE&&4==this.versionMajor;this.isIE4up=this.isIE&&4<=this.versionMajor;this.isIE5x=this.isIE&&5==this.versionMajor;this.isIE55=this.isIE&&5.5==this.versionMinor;this.isIE5up= this.isIE&&5<=this.versionMajor;this.isIE6x=this.isIE&&6==this.versionMajor;this.isIE6up=this.isIE&&6<=this.versionMajor;this.isIE4xMac=this.isIE4x&&this.isMac}var browser=new BrowserDetect; XWiki.Document=Class.create({initialize:function(a,b,c){this.page=a||XWiki.Document.currentPage;this.space=b||XWiki.Document.currentSpace;this.wiki=c||XWiki.Document.currentWiki},getURL:function(a,b,c){var a=a||"view",d=XWiki.Document.URLTemplate,d=d.replace("__space__",encodeURIComponent(this.space)),d=d.replace("__page__","WebHome"==this.page?"":encodeURIComponent(this.page)),d=d.replace("__action__/","view"==a?"":encodeURIComponent(a)+"/");b&&(d+="?"+b);c&&(d+="#"+c);return d},getRestURL:function(a, b){var a=a||"",c=XWiki.Document.RestURLTemplate,c=c.replace("__wiki__",this.wiki),c=c.replace("__space__",this.space),c=c.replace("__page__",this.page);a&&(c+="/"+a);b&&(c+="?"+b);return c}}); document.observe("xwiki:dom:loading",function(){XWiki.Document.currentWiki=0<$$("meta[name=wiki]").length?$$("meta[name=wiki]")[0].content:"xwiki";XWiki.Document.currentSpace=0<$$("meta[name=space]").length?$$("meta[name=space]")[0].content:"Main";XWiki.Document.currentPage=0<$$("meta[name=page]").length?$$("meta[name=page]")[0].content:"WebHome";XWiki.Document.URLTemplate="$xwiki.getURL('__space__.__page__', '__action__')";XWiki.Document.RestURLTemplate="${request.contextPath}/rest/wikis/__wiki__/spaces/__space__/pages/__page__"; XWiki.Document.WikiSearchURLStub="${request.contextPath}/rest/wikis/__wiki__/search";XWiki.Document.SpaceSearchURLStub="${request.contextPath}/rest/wikis/__wiki__/spaces/__space__/search";XWiki.Document.getRestSearchURL=function(a,b,c){c=c||XWiki.Document.currentWiki;b=b?XWiki.Document.SpaceSearchURLStub.replace("__wiki__",c).replace("__space__",b):XWiki.Document.WikiSearchURLStub.replace("__wiki__",c);a&&(b+="?"+a);return b};XWiki.currentDocument=new XWiki.Document}); document.observe("xwiki:dom:loaded",function(){var a=function(){this.value==this.defaultValue?this.value="":this.select()},b=function(){""==this.value&&(this.value=this.defaultValue)};$$("input.withTip","textarea.withTip").each(function(c){c.observe("focus",a.bindAsEventListener(c));c.observe("blur",b.bindAsEventListener(c))})}); document.observe("xwiki:dom:loaded",function(){var a={documents:{script:XWiki.Document.getRestSearchURL("scope=name&number=10&media=json&"),varname:"q",icon:"$xwiki.getSkinFile('icons/silk/page_white_text.gif')",noresults:"Document not found",json:!0,resultsParameter:"searchResults",resultId:"id",resultValue:"pageFullName",resultInfo:"pageFullName"},spaces:{script:XWiki.Document.getRestSearchURL("scope=spaces&number=10&media=json&"),varname:"q",icon:"$xwiki.getSkinFile('icons/silk/folder.gif')",noresults:"Space not found", json:!0,resultsParameter:"searchResults",resultId:"id",resultValue:"space",resultInfo:"space"},users:{script:XWiki.currentDocument.getURL("get","xpage=uorgsuggest&classname=XWiki.XWikiUsers&wiki=local&uorg=user&"),varname:"input",icon:"$xwiki.getSkinFile('icons/silk/user.gif')",noresults:"User not found"},groups:{script:XWiki.currentDocument.getURL("get","xpage=uorgsuggest&classname=XWiki.XWikiGroups&wiki=local&uorg=group&"),varname:"input",icon:"$xwiki.getSkinFile('icons/silk/group.gif')",noresults:"Group not found"}}; if("undefined"!=typeof XWiki.widgets.Suggest)for(var b=Object.keys(a),c=0;c<b.length;c++){var d="input.suggest"+b[c].capitalize();$$(d).each(function(d){if(!d.hasClassName("initialized")){var f={timeout:3E4,parentContainer:d.up()};Object.extend(f,a[b[c]]);new XWiki.widgets.Suggest(d,f);d.addClassName("initialized")}})}}); document.observe("xwiki:dom:loaded",function(){"undefined"!=typeof XWiki.widgets.Suggest&&$$(".suggested").each(function(a){a.setAttribute("autocomplete","off");"function"===typeof a.onfocus&&(a.onfocus(),a.removeAttribute("onfocus"))})}); document.observe("xwiki:dom:loaded",function(){function a(a){a&&a.stop();f.removeClassName("active");e.addClassName("edit-parent");e.removeClassName("hide-edit-parent")}function b(b){b.stop();b.element().blur();e.hasClassName("edit-parent")?(f.addClassName("active"),g.focus(),e.removeClassName("edit-parent"),e.addClassName("hide-edit-parent")):a()}var c=$("hierarchy"),d=$("breadcrumbs"),e=$("editParentTrigger"),f=$("parentinput"),g=$("xwikidocparentinput"),j=$("xwikidoctitleinput");$("hideEditParentTrigger")&& ($("hideEditParentTrigger").style.display="none");e&&e.observe("click",b);g&&((c||d)&&["blur","change","xwiki:suggest:selected"].each(function(a){g.observe(a,function(){var a={xpage:"xpart",vm:c?"hierarchy.vm":"space.vm",parent:g.value};j&&(a.title=j.value);new Ajax.Request(XWiki.currentDocument.getURL("edit"),{parameters:a,onSuccess:function(a){if(c)c.replace(a.responseText),c=$("hierarchy");else{var b=new Element("div");b.update(a.responseText);d.replace(b.down("[id=breadcrumbs]"));d=$("breadcrumbs")}}})})}), $("body").observe("click",function(b){!b.element().descendantOf(f)&&b.element()!=f&&b.element()!=e&&a()}))}); document.observe("xwiki:dom:loaded",function(){function a(){var a=$$(".annotationsettings"),i=0;a&&0<a.size()&&(f.__fm_extra=a[0],b(f.__fm_extra),i=f.__fm_extra.getHeight());var a=f.getHeight(),h=g.cumulativeOffset().top+g.getHeight()-a-i,i=g.cumulativeOffset().top-a-i;document.viewport.getScrollOffsets().top>=i&&document.viewport.getScrollOffsets().top<h?(i=g.getWidth(),h=g.cumulativeOffset().left,c(f,0,h,i),c(f.__fm_extra,a,h,i-50)):document.viewport.getScrollOffsets().top>=h?(d(f,h),d(f.__fm_extra, h+a)):(e(f),e(f.__fm_extra))}function b(a){"undefined"==typeof a.__fm_ghost&&(a.__fm_ghost=new Element("div"),a.__fm_ghost.hide(),a.insert({after:a.__fm_ghost}));a.__fm_ghost.clonePosition(a,{setWidth:!1})}function c(a,b,c,d){a&&(a.style.position="fixed",a.style.top=b+"px",a.style.left=c+"px",a.style.width=d+"px",a.__fm_ghost.show())}function d(a,b){a&&(a.style.position="absolute",a.style.top=b+"px",a.__fm_ghost.show())}function e(a){a&&(a.style.position="",a.style.top="",a.style.left="",a.style.width= "",a.__fm_ghost.hide())}var f=$("contentmenu")||$("editmenu"),g=$("mainContentArea")||$("mainEditArea");f&&g&&(b(f),Event.observe(window,"resize",function(){if("fixed"==f.style.position&&(f.style.width=g.getWidth()+"px","undefined"!=typeof f.__fm_extra)){if("px"==f.__fm_extra.getStyle("padding-left").replace(/[^a-z]/g,""))var a=f.__fm_extra.getStyle("border-left-width").replace(/[^0-9.]/g,"")-0,a=a+(f.__fm_extra.getStyle("padding-left").replace(/[^0-9.]/g,"")-0),a=a+(f.__fm_extra.getStyle("padding-right").replace(/[^0-9.]/g, "")-0),a=a+(f.__fm_extra.getStyle("border-right-width").replace(/[^0-9.]/g,"")-0);else a=50;f.__fm_extra.style.width=g.getWidth()-a+"px"}}),browser.isIE6x||(Event.observe(window,"scroll",a),document.observe("xwiki:annotations:settings:loaded",a)))}); document.observe("xwiki:wysiwyg:loaded",function(){var a=$$("#UIWikiPageEditForm iframe[class=gwt-RichTextArea]")[0];a.style.height="380px";a=a.contentWindow.document;a.body.id="body";a.body.className="UIWikiPortlet UIWikiPortletWysiwygCss";if(0==a.getElementsByTagName("script").length){var b=a.createElement("script");b.setAttribute("type","text/javascript");b.text="var eXo = parent.eXo;";a.getElementsByTagName("head")[0].appendChild(b)}0==a.getElementsByTagName("link").length&&(b=a.createElement("link"), b.setAttribute("rel","stylesheet"),b.setAttribute("type","text/css"),b.setAttribute("href","/wiki/skin/DefaultSkin/webui/Stylesheet.css"),a.getElementsByTagName("head")[0].appendChild(b))});
